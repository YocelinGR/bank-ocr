defmodule BankOcr.LcdDigits.LcdDigit do
  @moduledoc """
  This module will manage the operations related with convert the lcd digits into integer characters
  """
  alias BankOcr.Utils.Util
  require Logger

  @lcd_digits_str "
   _  _  _  _  _  _  _  _  _                             _  _  _  _  _  _  _  _  _
  | || || || || || || || || |  |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
  |_||_||_||_||_||_||_||_||_|  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
                                                         _  _  _  _  _  _  _  _  _
    |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
   _| _| _| _| _| _| _| _| _| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
  |_ |_ |_ |_ |_ |_ |_ |_ |_  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_

   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
   _| _| _| _| _| _| _| _| _| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
   _| _| _| _| _| _| _| _| _| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
                                                        _  _  _  _  _  _  _  _  _
  |_||_||_||_||_||_||_||_||_| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    |  |  |  |  |  |  |  |  | |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
  |_ |_ |_ |_ |_ |_ |_ |_ |_  |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
   _| _| _| _| _| _| _| _| _| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_

   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
  |_ |_ |_ |_ |_ |_ |_ |_ |_  |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
  |_||_||_||_||_||_||_||_||_| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
    |  |  |  |  |  |  |  |  | |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    |  |  |  |  |  |  |  |  | |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
  |_||_||_||_||_||_||_||_||_| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
  |_||_||_||_||_||_||_||_||_| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_

   _  _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
  |_||_||_||_||_||_||_||_||_| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
   _| _| _| _| _| _| _| _| _| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
      _  _     _  _  _  _  _                            _  _  _  _  _  _  _  _  _
    | _| _||_||_ |_   ||_||_| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    ||_  _|  | _||_|  ||_| _| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
   _  _  _  _  _  _  _  _                               _  _  _  _  _  _  _  _  _
  | || || || || || || ||_   | |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
  |_||_||_||_||_||_||_| _|  | |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_

      _  _  _  _  _  _ 	   _                            _  _  _  _  _  _  _  _  _
  |_||_|| || ||_   |  |  | _  |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    | _||_||_||_|  |  |  | _| |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
      _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
    | _| _||_| _ |_   ||_||_| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    ||_  _|  | _||_|  ||_| _  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
      _  _  _  _  _  _  _  _                            _  _  _  _  _  _  _  _  _
    | _| _||_| _ |_   ||_||_| |  |  |  |  |  |  |  |  | _| _| _| _| _| _| _| _| _|
    ||_  _|  | _||_|  ||_| _  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_
    "


  @doc """
  Convert multiline str into lists

  ## Examples

      iex> BankOcr.LcdDigits.LcdDigit.multiline_str_to_ist()
      [" _  _  _  _  _  _  _  _  _                             _  _  _  _  _  _  _  _  _", .. "||_  _|  | _||_|  ||_| _  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_"]

  """
  @spec multiline_str_to_ist() :: [String.t()]
  def multiline_str_to_ist() do
    @lcd_digits_str
    |> Util.string_to_list()
    |> Enum.filter(fn x -> x != "" end)
  end

  @doc """
  Convert a list of lcd number into a string representing a integer

  ## Examples

      iex> BankOcr.LcdDigits.LcdDigit.process_digit_list([
    " _ ",
    "| |",
    "|_|",
  ])
      "0"

  """
  @spec lcd_digit_to_integer([String.t]) :: String.t()
  def lcd_digit_to_integer([
    " _ ",
    "| |",
    "|_|",
  ]), do: "0"
  def lcd_digit_to_integer([
    "   ",
    "  |",
    "  |",
  ]), do: "1"
  def lcd_digit_to_integer([
    " _ ",
    " _|",
    "|_ ",
  ]), do: "2"
  def lcd_digit_to_integer([
    " _ ",
    " _|",
    " _|",
  ]), do: "3"
  def lcd_digit_to_integer([
    "   ",
    "|_|",
    "  |",
  ]), do: "4"
  def lcd_digit_to_integer([
    " _ ",
    "|_ ",
    " _|",
  ]), do: "5"
  def lcd_digit_to_integer([
    " _ ",
    "|_ ",
    "|_|",
  ]), do: "6"
  def lcd_digit_to_integer([
    " _ ",
    "  |",
    "  |",
  ]), do: "7"
  def lcd_digit_to_integer([
    " _ ",
    "|_|",
    "|_|",
  ]), do: "8"
  def lcd_digit_to_integer([
    " _ ",
    "|_|",
    " _|",
  ]), do: "9"

  @doc """
  Convert multiline str into lists

  ## Examples

      iex> BankOcr.LcdDigits.LcdDigit.process_digit_list([" _  _  _  _  _  _  _  _  _                             _  _  _  _  _  _  _  _  _", .. "||_  _|  | _||_|  ||_| _  |  |  |  |  |  |  |  |  ||_ |_ |_ |_ |_ |_ |_ |_ |_"])
      ["45750800066437149586110??36"]

  """
  @spec process_digit_list([String.t()]) :: [String.t()]
  def process_digit_list(digit_rows) do
    digit_rows
  end
end
